<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Nexus Finance</title>
<link rel="icon" type="image/png" href="assets/logo.png"/>
<link rel="stylesheet" href="styles.css?v=17"/>
</head>
<body>

<!-- ============== LOGIN (pantalla completa centrado) ============== -->
<div id="login" class="fullscreen-login view visible" aria-hidden="false">
<div class="login-hero">
<img src="assets/logo.png" alt="Logo" class="hero-logo"/>
<h1 class="hero-title">Nexus Finance</h1>
<p class="hero-subtitle">GestiÃ³n financiera simple, elegante y profesional</p>
</div>
<div class="login-wrap">
<div class="card login-card">
<h2 id="loginTitle">Ingresar PIN</h2>
<p id="loginHint">Introduce tu PIN para continuar</p>
<form id="loginForm" class="grid2">
<label class="full">PIN
<input id="loginPIN" type="password" inputmode="numeric" maxlength="8" placeholder="PIN"/>
</label>
<div id="loginPIN2Wrap" class="full" style="display:none">
<label>Repetir PIN
<input id="loginPIN2" type="password" inputmode="numeric" maxlength="8" placeholder="Repetir PIN"/>
</label>
</div>
<div class="full row center g">
<button id="loginBtn" type="submit" class="btn">Entrar</button>
</div>
</form>
<p id="loginAttempts" class="muted center"></p>
</div>
</div>
</div>

<!-- ================== SIDEBAR ================== -->
<aside class="sidebar" id="sidebar">
<div class="brand">
<img id="brandLogo" src="assets/logo.png" alt="Logo"/>
<div class="brand-info">
<strong id="brandName">Mi Negocio</strong><br/>
<small>Sistema financiero</small>
</div>
</div>

<nav class="menu">
<button class="nav-btn active" data-target="home">ğŸ  Inicio</button>
<button class="nav-btn" data-target="expenses">ğŸ’¸ Gastos Diarios</button>
<button class="nav-btn" data-target="incomes">ğŸ’° Entrada de Dinero</button>
<button class="nav-btn" data-target="payments">ğŸ§¾ Pago de NÃ³mina</button>
<button class="nav-btn" data-target="retenciones">ğŸ§¾ Retenciones (408/SS)</button>
<button class="nav-btn" data-target="reports">ğŸ“Š Reportes</button>
<button class="nav-btn" data-target="exports">ğŸ“¤ Exportar PDF</button>
<button class="nav-btn" data-target="ordinary">ğŸ“… Gastos Ordinarios</button>
<button class="nav-btn" data-target="personal">ğŸ§ Gastos Personales</button>
<button class="nav-btn" data-target="budgets">ğŸ“ˆ Control de Gastos</button>
<button class="nav-btn" data-target="invoices">ğŸ§¾ Crear Factura</button>
<button class="nav-btn" data-target="quotes">ğŸ“‹ Crear CotizaciÃ³n</button>
<button class="nav-btn" data-target="invoiceHistory">ğŸ“œ Historial de FacturaciÃ³n</button>
<button class="nav-btn" data-target="quoteHistory">ğŸ“œ Historial de Cotizaciones</button>
<button class="nav-btn" data-target="reconciliations">ğŸ¦ ConciliaciÃ³n Bancaria</button>
<button class="nav-btn" data-target="settings">âš™ï¸ ConfiguraciÃ³n</button>
<button id="logoutBtn" class="nav-btn btn-outline">ğŸšª Salir</button>
</nav>
</aside>

<!-- ================== MAIN ================== -->
<main class="main">
<div class="topbar">
<button id="menuToggle" class="btn-outline">â˜°</button>
<div class="grow"></div>
<button id="printBtn" class="btn-outline">ğŸ–¨ï¸ Exportar PDF</button>
</div>

<!-- ============ INICIO / DASHBOARD ============ -->
<section id="home" class="view visible" data-title="Inicio">
<div class="grid">
<div class="card">
<div class="card-title">Ingresos (Mes)</div>
<div class="kpi" id="kpiIncomesMonth">â€”</div>
<div class="muted small">= SalÃ³n ingreso (45%) + Retenciones pendientes</div>
</div>
<div class="card">
<div class="card-title">Gastos (Mes)</div>
<div class="kpi" id="kpiExpensesMonth">â€”</div>
<div class="muted small">= Gastos + NÃ³mina pagada + Retenciones pagadas</div>
</div>
<div class="card">
<div class="card-title">Balance (Mes)</div>
<div class="kpi" id="kpiBalanceMonth">â€”</div>
</div>
</div>

<div class="card">
<div class="card-title">Ingresos vs Gastos â€” Ãšltimos 12 meses</div>
<canvas id="chart12" height="180"></canvas>
</div>
</section>

<!-- ============ GASTOS DIARIOS ============ -->
<section id="expenses" class="view" data-title="Gastos Diarios">
<div class="card">
<div class="card-title">Nuevo gasto</div>
<form id="expenseForm" class="grid3">
<label>Fecha <input type="date" id="expDate"/></label>
<label>CategorÃ­a
<select id="expCategory"></select>
</label>
<label>MÃ©todo
<select id="expMethod"></select>
</label>
<label>Referencia <input type="text" id="expRef" placeholder="Ej. #cheque / #ATH / #tarjeta"/></label>
<label class="full">DescripciÃ³n <input type="text" id="expDesc" placeholder="DescripciÃ³n"/></label>
<label>Monto <input type="number" step="0.01" id="expAmount"/></label>
<label>Nota <input type="text" id="expNote" placeholder="Nota"/></label>
<div class="full row g">
<button type="button" id="addExpense" class="btn-outline">Hoy</button>
<button class="btn">Guardar Gasto</button>
</div>
</form>
</div>

<!-- Totales arriba -->
<div class="card">
<div class="header-inline">
<div class="card-title">Totales del perÃ­odo</div>
<div class="stats-wrap">
<div class="stat-card">
<span class="label">Total general</span>
<span class="value num" id="expSumTotal">â€”</span>
</div>
</div>
</div>
<div id="expSumPills" class="pills"></div>
</div>

<div class="card">
<div class="row between">
<div class="card-title">Listado de gastos</div>
<div class="row g">
<label>Desde <input type="date" id="fExpFrom"/></label>
<label>Hasta <input type="date" id="fExpTo"/></label>
<button id="fExpApply" class="btn-outline">Filtrar</button>
</div>
</div>
<table id="expensesTable" class="data">
<thead>
<tr>
<th>Fecha</th>
<th>CategorÃ­a</th>
<th>DescripciÃ³n</th>
<th>MÃ©todo</th>
<th>Ref</th>
<th>Monto</th>
<th>Nota</th>
<th></th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</section>

<!-- ============ ENTRADAS DE DINERO (por empleado semanal) ============ -->
<section id="incomes" class="view" data-title="Entradas de Dinero">
<div class="card">
<div class="card-title">Nuevo ingreso (Entrada por empleado semanal)</div>
<form id="incomeForm" class="grid3">
<label>Fecha <input type="date" id="incDate"/></label>
<label>Empleado <input type="text" id="incEmployee" placeholder="Nombre del empleado"/></label>
<label>MÃ©todo
<select id="incMethod"></select>
</label>
<label>Referencia <input type="text" id="incRef" placeholder="Ej. #cheque / #ATH / #tarjeta"/></label>
<label>Monto (Bruto) <input type="number" step="0.01" id="incAmount"/></label>
<div class="full row g">
<button type="button" id="addIncome" class="btn-outline">Hoy</button>
<button class="btn">Guardar Entrada</button>
</div>
</form>
</div>

<!-- Totales por mÃ©todo -->
<div class="card">
<div class="header-inline">
<div class="card-title">Totales por mÃ©todo</div>
<div class="stats-wrap">
<div class="stat-card">
<span class="label">Total general</span>
<span class="value num" id="incSumTotal">â€”</span>
</div>
</div>
</div>
<div id="incSumMethods" class="pills"></div>
</div>

<div class="card">
<div class="row between">
<div class="card-title">Listado de ingresos</div>
<div class="row g">
<label>Desde <input type="date" id="fIncFrom"/></label>
<label>Hasta <input type="date" id="fIncTo"/></label>
<label>Empleado <input type="text" id="fIncEmployee" placeholder="Filtrar por empleado"/></label>
<button id="fIncApply" class="btn-outline">Filtrar</button>
</div>
</div>
<table id="incomesTable" class="data">
<thead>
<tr>
<th>Fecha</th>
<th>Empleado</th>
<th>MÃ©todo</th>
<th>Ref</th>
<th>Monto</th>
<th></th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</section>

<!-- ============ PAGO DE NÃ“MINA ============ -->
<section id="payments" class="view" data-title="Pago de NÃ³mina">
<div class="card">
<div class="card-title">Nuevo pago (NÃ³mina)</div>
<form id="paymentForm" class="grid3">
<label>Fecha <input type="date" id="payDate"/></label>
<label>Empleado/Beneficiario <input type="text" id="payTo" placeholder="Nombre"/></label>
<label>CategorÃ­a <input type="text" id="payCategory" placeholder="NÃ³mina / Servicio"/></label>

<label>Monto Bruto <input type="number" step="0.01" id="payGross"/></label>
<label>RetenciÃ³n ISR (408) <input type="number" step="0.01" id="payRetISR"/></label>
<label>Seguro Social (SS) <input type="number" step="0.01" id="payRetSS"/></label>
<label>Otras Deducciones <input type="number" step="0.01" id="payRetOther"/></label>
<label>Neto Calculado <input type="number" step="0.01" id="payAmount" readonly/></label>
<label>Estado
<select id="payStatus">
<option>Pendiente</option>
<option>Pagado</option>
</select>
</label>
<div class="full row g">
<button type="button" id="addPayment" class="btn-outline">Hoy</button>
<button class="btn">Guardar Pago</button>
</div>
</form>
</div>

<!-- Totales arriba -->
<div class="card">
<div id="payrollHeader">
<div class="card-title">Resumen de NÃ³mina</div>
<div class="payroll-summary">
<div class="payroll-card">
<span>Total NÃ³mina</span>
<span class="value num" id="payrollTotal">â€”</span>
</div>
<div class="payroll-card">
<span>Pagadas</span>
<span class="value num" id="payrollPaid">â€”</span>
</div>
<div class="payroll-card">
<span>Pendientes</span>
<span class="value num" id="payrollPending">â€”</span>
</div>
</div>
</div>
</div>

<div class="card">
<div class="card-title">Pagos</div>
<table id="paymentsTable" class="data">
<thead><tr><th>Fecha</th><th>Empleado/Benef.</th><th>CategorÃ­a</th><th>Neto</th><th>Estado</th><th></th></tr></thead>
<tbody></tbody>
</table>
</div>
</section>

<!-- ============ RETENCIONES (408 / SS) ============ -->
<section id="retenciones" class="view" data-title="Retenciones">
<div class="card">
<div class="card-title">Resumen de Retenciones</div>
<div class="grid">
<div class="stat-card">
<span class="label">408 Pendiente</span>
<span class="value num" id="ret408Pending">â€”</span>
</div>
<div class="stat-card">
<span class="label">408 Pagada</span>
<span class="value num" id="ret408Paid">â€”</span>
</div>
<div class="stat-card">
<span class="label">SS Pendiente</span>
<span class="value num" id="retSSPending">â€”</span>
</div>
<div class="stat-card">
<span class="label">SS Pagada</span>
<span class="value num" id="retSSPaid">â€”</span>
</div>
</div>
</div>

<div class="card">
<div class="card-title">Historial por empleado</div>
<div class="row g">
<label>Desde <input type="date" id="fRetFrom"/></label>
<label>Hasta <input type="date" id="fRetTo"/></label>
<label>Empleado <input type="text" id="fRetEmployee" placeholder="Filtrar por empleado"/></label>
<button id="fRetApply" class="btn-outline">Filtrar</button>
</div>
<table id="retencionesTable" class="data">
<thead><tr><th>Fecha</th><th>Empleado</th><th>Bruto</th><th>SalÃ³n 45%</th><th>Ret. 408</th><th>408 Pagada</th><th>SS</th><th>SS Pagada</th><th>Neto</th><th>Acciones</th></tr></thead>
<tbody></tbody>
</table>
</div>
</section>

<!-- ============ RESTO DE SECCIONES (Reportes, Exports, etc.) ============ -->
<section id="reports" class="view" data-title="Reportes">
<div class="grid">
<div class="card"><div class="card-title">Hoy</div><div class="kpi" id="rToday">â€”</div><p class="muted">Ingresos / Gastos</p></div>
<div class="card"><div class="card-title">Semana</div><div class="kpi" id="rWeek">â€”</div><p class="muted">Ingresos / Gastos</p></div>
<div class="card"><div class="card-title">Mes</div><div class="kpi" id="rMonth">â€”</div><p class="muted">Ingresos / Gastos</p></div>
<div class="card"><div class="card-title">AÃ±o</div><div class="kpi" id="rYear">â€”</div><p class="muted">Ingresos / Gastos</p></div>
</div>
</section>

<section id="exports" class="view" data-title="Exportaciones en PDF">
<div class="card">
<div class="card-title">Generar PDF</div>
<div class="grid3">
<label>Desde <input type="date" id="expFrom"/></label>
<label>Hasta <input type="date" id="expTo"/></label>
<label>Empleado <input type="text" id="expEmployee" placeholder="Filtrar por empleado"/></label>
<button class="btn" data-print-view="expenses">Gastos Diarios</button>
<button class="btn" data-print-view="incomes">Ingresos</button>
<button class="btn" data-print-view="payments">Pago de NÃ³mina</button>
<button class="btn" data-print-view="personal">Gastos Personales</button>
<button class="btn" data-print-view="invoices">Facturas (lista)</button>
<button class="btn" data-print-view="quotes">Cotizaciones (lista)</button>
<button class="btn" data-print-view="ordinary">Gastos Ordinarios</button>
<button class="btn" data-print-view="reconciliations">ConciliaciÃ³n Bancaria</button>
</div>
</div>
</section>

<!-- (El resto de secciones que tenÃ­as se mantienen; para brevedad no las repito aquÃ­ salvo que lo pidas) -->

<!-- ============ TOASTS ============ -->
<div id="toastContainer" class="toasts"></div>

</main>

<!-- ================== SCRIPTS ================== -->
<script type="module" src="app.js?v=8"></script>
</body>
</html>
